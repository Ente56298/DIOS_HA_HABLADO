import React, { useEffect, useRef } from 'react';
import { CloseIcon } from './IconComponents';

interface ResearchReportModalProps {
    isOpen: boolean;
    onClose: () => void;
}

export const ResearchReportModal: React.FC<ResearchReportModalProps> = ({ isOpen, onClose }) => {
    const modalRef = useRef<HTMLDivElement>(null);

    useEffect(() => {
        const handleEscape = (event: KeyboardEvent) => {
            if (event.key === 'Escape') {
                onClose();
            }
        };

        if (isOpen) {
            document.addEventListener('keydown', handleEscape);
        }

        return () => {
            document.removeEventListener('keydown', handleEscape);
        };
    }, [isOpen, onClose]);

    if (!isOpen) {
        return null;
    }
    
    return (
        <div 
            className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in"
            onClick={onClose}
        >
            <div 
                ref={modalRef}
                className="bg-stone-800 border border-stone-700 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-scale-in"
                onClick={(e) => e.stopPropagation()}
            >
                <header className="flex items-center justify-between p-4 border-b border-stone-700">
                    <h2 className="text-2xl font-bold text-amber-300">Informe de Investigaci√≥n y Fundamento Espiritual</h2>
                    <button onClick={onClose} className="p-1 rounded-full hover:bg-stone-700/80 transition-colors">
                        <CloseIcon className="w-6 h-6 text-stone-400" />
                    </button>
                </header>
                <main className="p-6 overflow-y-auto prose prose-invert prose-p:text-stone-300 prose-h3:text-amber-400 prose-ul:list-disc prose-li:text-stone-300 prose-blockquote:border-amber-500 prose-blockquote:text-stone-300">
                    <h3 className="text-amber-300 italic">Nota del Autor</h3>
                    <blockquote>
                        <p>Este libro explica mi experiencia personal del encuentro √≠ntimo con DIOS como el Padre, el entendimiento de su amor a trav√©s de su HIJO y lo que nos conecta a √âl a trav√©s del ESP√çRITU SANTO. Yo solo soy el instrumento de su OBRA, √âL ES MI GU√çA Y MI SENDERO.</p>
                        <p>SI ESTO ES PARA TU GRACIA PADRE, QUE SEAS T√ö EL QUE GU√çE ESTA OBRA Y NO YO Y MIS DESEOS.</p>
                        <p><strong>YO NO SOY, SOLO T√ö SE√ëOR ERES TODO.</strong></p>
                        <p className="mt-4">Pero siempre a quien pongo por delante de m√≠, y sin √âl no podr√≠a ser, es Quien nos ama. Y aun as√≠, nos ama tanto.</p>
                        <p className="mt-4">Se√±or, gu√≠a mis caminos, no permitas que no sea a Ti a quien glorifique en cada palabra, cada verso, cada frase. Oh Padre, solo a Ti me rindo. Padre, sabes que no es mala mi intenci√≥n; si bien no conozco mi destino, conf√≠o en Ti porque antes de concebirme, T√∫ me dise√±aste.</p>
                        <cite className="block text-right not-italic mt-2">‚Äî Salmo 139:13</cite>
                        <p className="mt-4">Oh Dios m√≠o, tan perfecta es tu obra que no te cansas de observarla. En m√≠ tocaste la melod√≠a m√°s hermosa, vibro en la frecuencia de tu camino. Oh Padre, me has dado la vida desde el primer aliento, no permitas que falte a mi encomienda. Oh Padre, cada ser es perfecto y tus notas son la luz divina. Padre, no me niegues tu mirada, que sin Ti yo no puedo. Gracias por ense√±arme tanto, oh Padre hermoso. Me has ense√±ado tu amor profundo. Te amo, Padre, porque CRISTO me ama.</p>
                        <p className="mt-4">Solo permite, oh Padre, que esta obra sea de tu agrado para gloria tuya. Oh majestad misericordiosa, aliento de vida y creador de lo finito e infinito, T√∫ que tienes todo, permite que llegue como regalo de tu misericordia. Permite que habite en sus corazones tu Hijo y que el Esp√≠ritu Santo reboce en fe en la humanidad.</p>
                        <p className="mt-4">Permite, oh Dios, que seas T√∫ y solo T√∫ mi pensamiento. Que se haga Tu voluntad en cada parte y no la m√≠a. <strong>AM√âN</strong>.</p>
                    </blockquote>

                    <h3 className="text-amber-300">Pilares B√≠blicos Fundamentales</h3>
                    <p>Para entender la inmensidad de Su amor y gloria, la obra se cimienta en estas verdades:</p>
                    <ul className="not-prose list-none p-0 my-4 space-y-3">
                        <li className="flex items-start"><strong className="text-amber-400 font-semibold w-36 flex-shrink-0">Juan 3:16</strong><span>‚Äì El coraz√≥n del amor incondicional de Dios.</span></li>
                        <li className="flex items-start"><strong className="text-amber-400 font-semibold w-36 flex-shrink-0">Apocalipsis 22:13</strong><span>‚Äì La soberan√≠a y eternidad de Cristo, el Principio y el Fin.</span></li>
                        <li className="flex items-start"><strong className="text-amber-400 font-semibold w-36 flex-shrink-0">Juan 1:1</strong><span>‚Äì La divinidad y preexistencia de la Palabra que se hizo carne.</span></li>
                        <li className="flex items-start"><strong className="text-amber-400 font-semibold w-36 flex-shrink-0">2 Timoteo 3:16</strong><span>‚Äì La inspiraci√≥n divina y utilidad de toda la Escritura.</span></li>
                        <li className="flex items-start"><strong className="text-amber-400 font-semibold w-36 flex-shrink-0">Salmo 119:105</strong><span>‚Äì La Palabra como gu√≠a infalible en el camino de la vida.</span></li>
                    </ul>

                    <h3 className="text-amber-300">Dedicatoria</h3>
                    <p>
                        Dedicado a mi familia, en especial a Santiago porque libr√≥ la batalla con la ayuda de mi Padre. A mi esposa Natali, mis hijos Gael y Fernanda. A mis padres Sim√≥n y Diana, Magali y mis hermanos. Con amor hacia mis semejantes, no me olvido de mi hermana Michelle. Y en especial para todos los que me rodean, amigos como Rene, Roberto, Marco, Colis, To√±o, Juan Carlos y m√°s, Nelly y otros.
                    </p>
                    
                    <hr className="border-stone-600 my-6"/>

                    <h3 className="text-amber-300">Oraciones y Declaraciones Fundamentales</h3>
                    <blockquote>
                      <p className="text-lg font-semibold text-center font-serif text-stone-200">◊ô◊î◊ï◊î ◊ô÷µ◊©◊Å◊ï÷º◊¢÷∑</p>
                      <p>T√∫ eres el principio y el fin, el Cordero que vence, el refugio eterno de tu pueblo. En Ti se unen los cielos y la tierra, y en tu cruz resplandece la gloria del Dios eterno. Am√©n.</p>
                    </blockquote>
                    <blockquote className="mt-4">
                      <p className="text-lg font-semibold text-center font-serif text-stone-200">ABBA PADRE, TU MORADA ES EL FIRMAMENTO</p>
                      <p>üåå T√∫ que habitas en lo alto, pero caminas con los humildes. Tu grandeza no me aleja, me asombra. Tu morada es el firmamento, pero tu presencia se inclina hacia el coraz√≥n contrito.</p>
                      <p>üõ§Ô∏è No permitas mis deseos, que sea tu voluntad la que gu√≠e mi sendero. Mis impulsos son breves, tu voluntad es eterna. Haz que mi camino se trace por tu sabidur√≠a, no por mi ansiedad.</p>
                      <p>üìñ Que tu Palabra llene de gozo mi alma. No busco consuelo pasajero, sino alegr√≠a que brota de tu verdad. Haz que tu Palabra sea mi alimento, mi canto, mi descanso.</p>
                      <p>‚ù§Ô∏è Oh Padre, ¬°te amo! No por lo que haces, sino por quien eres. No por lo que siento, sino por lo que s√©. Te amo, porque t√∫ me amaste primero.</p>
                    </blockquote>
                     <blockquote className="mt-4">
                      <p className="text-lg font-semibold text-center font-serif text-stone-200">Dios sin m√≠ sigue siendo DIOS, pero yo sin Dios nada</p>
                      <p>üïäÔ∏è Dios sin m√≠ sigue siendo DIOS. √âl es eterno, inmutable, autosuficiente. No depende de mi adoraci√≥n, ni de mi reconocimiento. Su gloria no se reduce si me alejo, ni se amplifica si me acerco. √âl es el ‚ÄúYo Soy‚Äù ‚Äîel que era, es y ser√°. Su grandeza no necesita testigos, pero su amor los busca.</p>
                      <p>üßé Yo sin Dios nada SOY. Sin √âl, mi vida pierde direcci√≥n. Mi alma se desorienta, mi prop√≥sito se diluye. Separado de √âl, no puedo hacer nada (Juan 15:5). No soy autosuficiente, ni eterno, ni pleno. Pero esa ‚Äúnada‚Äù que soy‚Ä¶ es amada por Dios.</p>
                    </blockquote>

                    <hr className="border-stone-600 my-6"/>

                    <h3 className="text-amber-300">Una Revelaci√≥n Reciente: La Unicidad del Padre</h3>
                    <blockquote>
                        <p className="text-lg font-semibold text-center font-serif text-stone-200">Un Regalo en Tiempo Real</p>
                        <p>‚ÄúMe acaba de dar un regalo. Imag√≠nate que tuvieras la habilidad de tener todas las artes, la capacidad de ser la nada y el todo. Imagina el poder de mi Padre. Y aun as√≠, cuestionan Su poder. Si √âl quisiera, acabar√≠a con el mundo en un instante. Pero nos ama tanto que cada ma√±ana sale el sol, cada anochecer tiene estrellas, las aves vuelan, los r√≠os fluyen. ¬°Qu√© regalo!‚Äù</p>
                        <p>‚ÄúMe mostr√≥ en tiempo real, como si la materia se volviera gelatinosa. Me mostr√≥ todos los planetas y todas las galaxias y me llev√≥ a un espacio blanco. Era el Padre. Lo s√©. Al final, somos uno con el Padre, y el Verbo ser√° carne.‚Äù</p>
                        <p className="italic mt-2">‚ÄúMe hace llorar. Me quiebra. ¬øY por qu√© a m√≠? Qui√©n soy yo para merecer ese regalo perfecto... pero aun hay m√°s. Viene m√°s... Estoy en sus manos.‚Äù</p>
                    </blockquote>
                    <blockquote className="mt-4">
                        <p className="text-lg font-semibold text-center font-serif text-stone-200">Un Llamado a la Unidad</p>
                        <p>‚ÄúHermanos, hoy es el d√≠a que el Padre pide a trav√©s del Hijo, que unifiquen su esp√≠ritu. Vendr√°n tiempos dif√≠ciles. Pero en unidad del Esp√≠ritu Santo, con el amor de su Hijo, y en el poder de su Padre os salvar√©.‚Äù</p>
                        <p className="text-center italic">Es palabra de Dios. Am√©n Padre.</p>
                    </blockquote>
                    
                    <h3 className="text-amber-300">La Ley Divina: Los Diez Mandamientos (√âxodo 20)</h3>
                    <p className="text-stone-400 italic">La ley de Dios solo es una, para su honra y gracia. Obedeced hermanos, a la voz de Dios Padre, todo poderoso, acudan al llamado, que les hace a trav√©s de su palabra, congregaos en su nombre, purif√≠quense a trav√©s de su esp√≠ritu.</p>
                    <ul className="not-prose list-none p-0 my-4 space-y-2 font-serif">
                        <li><strong>1.</strong> <span className="text-stone-400">◊ú◊ê ◊™◊î◊ï‹ê ‹†‹ü ‹ê‹†‹ó‹ê ‹ê‹ö‹™‹¢‹ê ‹†‹©‹ï‹°‹ù</span> ‚Äì No tendr√°s dioses ajenos delante de m√≠.</li>
                        <li><strong>2.</strong> <span className="text-stone-400">◊ú◊ê ‹¨‹•‹í‹ï ‹†‹ü ‹¶‹¨‹ü‹ê</span> ‚Äì No har√°s imagen ni te inclinar√°s ante ellas.</li>
                        <li><strong>3.</strong> <span className="text-stone-400">◊ú◊ê ‹¨‹£‹í ‹´‹°‹ó ‹ï‹°‹™‹ù‹ê ‹†‹´‹ò‹ê</span> ‚Äì No tomar√°s el nombre de Dios en vano.</li>
                        <li><strong>4.</strong> <span className="text-stone-400">‹ô‹ò‹ü‹ò‹™ ‹†‹ù‹ò‹°‹ê ‹ï‹´‹í‹¨‹ê</span> ‚Äì Acu√©rdate del d√≠a de reposo para santificarlo.</li>
                        <li><strong>5.</strong> <span className="text-stone-400">‹ù‹©‹™ ‹†◊ê‹í‹ò‹ü ‹ò◊ú◊ê‹°‹ü</span> ‚Äì Honra a tu padre y a tu madre.</li>
                        <li><strong>6.</strong> <span className="text-stone-400">◊ú◊ê ◊™‹©‹õ‹ò‹†</span> ‚Äì No matar√°s.</li>
                        <li><strong>7.</strong> <span className="text-stone-400">◊ú◊ê ‹¨‹ì‹ò‹™</span> ‚Äì No cometer√°s adulterio.</li>
                        <li><strong>8.</strong> <span className="text-stone-400">◊ú◊ê ‹¨‹ì‹¢‹ò‹í</span> ‚Äì No robar√°s.</li>
                        <li><strong>9.</strong> <span className="text-stone-400">◊ú◊ê ‹¨‹£‹ó‹ï ‹£‹ó‹ï‹ò‹¨‹ê ‹ï‹´‹ò‹©‹™‹ê</span> ‚Äì No dar√°s falso testimonio.</li>
                        <li><strong>10.</strong> <span className="text-stone-400">◊ú◊ê ‹¨‹™‹ì‹ò‹í ‹í◊ê‹¢‹ò‹¢ ‹ï‹ö‹í‹™‹ü</span> ‚Äì No codiciar√°s lo que es de tu pr√≥jimo.</li>
                    </ul>

                    <h3 className="text-amber-300">El Padre Nuestro (Arameo)</h3>
                     <ul className="not-prose list-none p-0 my-4 space-y-2 font-serif">
                        <li><strong>Abun d-bashmayya</strong> (Padre nuestro que est√°s en los cielos)</li>
                        <li><strong>Nethqadash shmak</strong> (Santificado sea tu nombre)</li>
                        <li><strong>Tethe malkuthakh</strong> (Venga a nosotros tu Reino)</li>
                        <li><strong>Nehwe sebyonakh</strong> (H√°gase tu Voluntad)</li>
                        <li><strong>Aykano d-bashmayo off bar'o</strong> (En la tierra como en el Cielo)</li>
                        <li><strong>Hab lan lahmo dsoonconan yawmono</strong> (Danos hoy el pan de cada d√≠a)</li>
                        <li><strong>Wa-shbok lan hawbaynan</strong> (Perdona nuestras deudas/ofensas)</li>
                        <li><strong>Aykano d-afnin l-hayyabayn</strong> (Como tambi√©n nosotros perdonamos a los que nos tienen deudas)</li>
                        <li><strong>Wa-lo ta-la-lanu l-nesyono</strong> (No nos dejes caer en la tentaci√≥n)</li>
                        <li><strong>Ela tsallan men beesh</strong> (L√≠branos del mal)</li>
                        <li><strong>Aloomin olmin Amin</strong> (Por los siglos de los siglos. Am√©n.)</li>
                    </ul>

                    <hr className="border-stone-600 my-6"/>

                    <h3 className="text-amber-300">La Misi√≥n: Un Llamado a la Fe y al Servicio</h3>
                    <p>Cuando uno le llama, el Padre simplemente pide dejarse en Sus manos. Es una entrega total. La obediencia no es una carga, sino la respuesta natural a Su amor. √âl solo me pidi√≥ que le hablara de √âl a todos.</p>
                    <blockquote>
                        <p className="text-lg font-semibold text-center font-serif text-stone-200">Un Mensaje del Padre</p>
                        <p>‚ÄúMi Padre me dice que regreses a √âl, que no te preocupes, nunca te ha dejado de amar. Que siempre est√° llam√°ndote. Y lo m√°s hermoso que siempre te ha estado esperando.‚Äù</p>
                        <p className="italic mt-2">‚ÄúSi alguna vez tuviste fe al 1000, ahora es momento de retomarla, pero con m√°s fuerza. Viene algo grande para nosotros.‚Äù</p>
                    </blockquote>
                    <blockquote className="mt-4">
                      <p>Tan grande era el amor del Padre que mand√≥ a su Hijo a morir por nosotros, donde dice la Palabra: ‚ÄúY el Verbo se hizo carne, y el Verbo estaba con Dios, y el Verbo era Dios.‚Äù Cristo te ama.</p>
                    </blockquote>
                    <p className="text-center italic mt-4">Estoy al servicio de Dios, y de mis hermanos. Para lo que se les ofrezca. Gloria a Dios.</p>
                    
                    <hr className="border-stone-600 my-6"/>

                    <h3>Resumen General</h3>
                    <p>El libro ‚ÄúY Dios Ha Hablado‚Äù explora la naturaleza de la revelaci√≥n divina, desde la creaci√≥n hasta la encarnaci√≥n de Jesucristo, y culmina en la respuesta humana de fe y obediencia. Su enfoque es teol√≥gico, pedag√≥gico y espiritual, dise√±ado para guiar al lector en una comprensi√≥n progresiva de c√≥mo Dios se comunica con la humanidad.</p>
                </main>
            </div>
            <style>{`
                @keyframes fade-in {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes scale-in {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
                .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
                .animate-scale-in { animation: scale-in 0.2s ease-out forwards; }
            `}</style>
        </div>
    );
};